<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
    <title>Title</title>
</head>
<body>

<script type='text/javascript'>
    async function initEmbeddedMessaging() {
        try {
            const token = await fetch('https://web-data-api.stage.int.oxyplatform.io/salesforce-messaging');

            embeddedservice_bootstrap.settings.language = 'en_US'; // For example, enter 'en' or 'en-US'

            window.addEventListener("onEmbeddedMessagingReady", () => {
                console.log("Received the onEmbeddedMessagingReady event.");

                // Send data to Salesforce
                embeddedservice_bootstrap.prechatAPI.setHiddenPrechatFields({
                    "EmailAddress": "test@test.com",
                    "UserID": "123",
                    "OriginURL": "https://test.com"
                });

                // Send your identity token to Salesforce
                embeddedservice_bootstrap.userVerificationAPI.setIdentityToken({
                    identityTokenType: "JWT",
                    identityToken: token,
                });
            });

            embeddedservice_bootstrap.init(
                '00Dbg000003aLDt',
                'DashboardChatDeployment',
                'https://goforce--partdata.sandbox.my.site.com/ESWDashboardChatDeploymen1747129625716',
                {
                    scrt2URL: 'https://goforce--partdata.sandbox.my.salesforce-scrt.com'
                }
            );
        } catch (err) {
            console.error('Error loading Embedded Messaging: ', err);
        }
    }
</script>
<script type='text/javascript' src='https://goforce--partdata.sandbox.my.site.com/ESWDashboardChatDeploymen1747129625716/assets/js/bootstrap.min.js' onload='initEmbeddedMessaging()'></script>
</body>
</html>