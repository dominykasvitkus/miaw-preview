<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
    <title>Title</title>
</head>
<body>

<script type='text/javascript'>
    async function initEmbeddedMessaging() {
        try {
            // const token = await fetch('https://web-data-api.stage.int.oxyplatform.io/salesforce-messaging');

            // Web
            //const token = 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IndlYiJ9.eyJzdWIiOiJkZTRjZmU3Ni05NGNhLTQwYmEtOGY4Zi1hNjhkMGI5MjQzNjEiLCJpc3MiOiJnb2ZvcmNlIiwiaWF0IjoxNzQ3Mzc5MTMyLCJleHAiOjE3NDc0NjU1MzJ9.dNYqc0uP6m4jvERPq2BZcZbGrmLym_VXoOzUlR4c3ehs-BnXhqMHrVJ2HyihgMe9BBUunDS8dsI0uCwjxMEgFryybEnxt69jzSbt_83maXNKS6TMQBo0CAL-TSup0_lj0F0DpWpiJX6Akb6Gj_I_4lWYiilN-IGXDvQcimwlmNNMEZ1nODFuTUNA22IlH41jHY45yPSEShe4OgLjj5DervgvEajx1_lDYo8Ynu1Ixw2JB_FWjCDjSoPdPUJgkXqX8JCeIGE6UKNyQeFpraYr8Z-Tc0nlXInpC6A9ubuH4BsFdZ9m-pmLpo0WFVMuHvNayVdZGrEQgl0D-j2wsbnIig';

            // WebStage
            const token = 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IndlYi1zdGFnZSJ9.eyJzdWIiOiJkZTRjZmU3Ni05NGNhLTQwYmEtOGY4Zi1hNjhkMGI5MjQzNjEiLCJpc3MiOiJnb2ZvcmNlLS1wYXJ0ZGF0YSIsImlhdCI6MTc0NzM3OTEzMiwiZXhwIjoxODQ3NDY1NTMyfQ.MeJu76GK0AQy4Bae653JlQ6dW5DunzIZWoYIz6GhSqRUOyzMXY8ZsUfoUBuE5O_COAi3rpjgmIB0W_mcYkFD0BFJW_2WzWLuqQGpAzOqtKyxNmJ8oGMVXtof4P_TDwkkzNQB_YbdlbisEgcYwe2xgyRgHpTjH6ko9mh2ZD0bNkV4Nb1xZiPGN_Ra3h8d_RRZpSvQtQU2DFVOoO-A2A-srxejLlAKjV5ncEq0WECpGRilcI9LC_bHQwxJ8eS8dkonoeQmFre7weKiDt-aX1Yf83Ts7zlCxWvC3HxXjOh3uSc6rnPCLJwkUBocPM2F7MQmfSrEbLfAm3lvlk2QJW3ZkA';

            // DashStage
            // const token = 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImRhc2gtc3RhZ2UifQ.eyJzdWIiOiI0MzJmOTdhNy1iYTM3LTQ3YmUtODllOC0wYzVkMGI5MGVlMWYiLCJpc3MiOiJnb2ZvcmNlLS1wYXJ0ZGF0YSIsImlhdCI6MTc0NzIyNDAyNSwiZXhwIjoxNzQ3MzEwNDI1fQ.kaLQxdvZ9qGuNP6DxtQKNndJdIQiF1rhSfkrSqRdKW6IYxutWrUAVr74vZ3Aq8tv-l8K5cEyMCQT2Y5RptRVjRM2m_6nadk9o3gzQvWJoHbpGg5LfaQFgsCOHDysJhjpIG4F6fAJlZi50C3rgmkIAHr-WTXge1MCpp1XfYRhxRwfV9gFNMyuwt99KCeGLjuqlSHmdREFx5sVN0CK5Ma_9bqhpdNx4wUT6JMamx8rPCQrZxgs-iJEn_k-JnfUJduiAwFNyRmtAJTnxV0D_905h-yJWrcR4r_D6ZAAOktxMzVkAWYwS9ue5Ul6PqvDJbA4-aTDXW92yWOYt-D0A1qKLQ';
            embeddedservice_bootstrap.settings.language = 'en_US'; // For example, enter 'en' or 'en-US'

            window.addEventListener("onEmbeddedMessagingReady", () => {
                console.log("Received the onEmbeddedMessagingReady event.");

                // Send data to Salesforce
                embeddedservice_bootstrap.prechatAPI.setHiddenPrechatFields({
                    "EmailAddress": "test@test.com",
                    "UserID": "123",
                    "OriginURL": "https://test.com"
                });

                // Send your identity token to Salesforce
                embeddedservice_bootstrap.userVerificationAPI.setIdentityToken({
                    identityTokenType: "JWT",
                    identityToken: token,
                });
            });

            embeddedservice_bootstrap.init(
                '00Dbg000003aLDt',
                'WebChatDeployment',
                'https://goforce--partdata.sandbox.my.site.com/ESWWebChatDeployment1744198927760',
                {
                    scrt2URL: 'https://goforce--partdata.sandbox.my.salesforce-scrt.com'
                }
            );
        } catch (err) {
            console.error('Error loading Embedded Messaging: ', err);
        }
    }
</script>
<script type='text/javascript' src='https://goforce--partdata.sandbox.my.site.com/ESWWebChatDeployment1744198927760/assets/js/bootstrap.min.js' onload='initEmbeddedMessaging()'></script>
</body>
</html>