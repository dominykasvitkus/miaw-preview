<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
    <title>Title</title>
</head>
<body>

<script type='text/javascript'>
    async function initEmbeddedMessaging() {
        try {
            // const token = await fetch('https://web-data-api.stage.int.oxyplatform.io/salesforce-messaging');

            // Web
            const token = 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IndlYiJ9.eyJzdWIiOiI0MzJmOTdhNy1iYTM3LTQ3YmUtODllOC0wYzVkMGI5MGVlMWYiLCJpc3MiOiJnb2ZvcmNlIiwiaWF0IjoxNzQ3MjI0MDI1LCJleHAiOjE3NDczMTA0MjV9.aa_BTG47BJPoxByb_41tCakPE_PVgCG6ZXUMcfuc-4VlhSy8JiqFOowwuliiGnii8tsLBWh033wy86xBJsCkfw9h8WkqRGr0Z81rfF8CMqNn7NwP94T7ie5FtRoq1twxvLVFzavy4bmzO2FvzPmEQDoGsnoAZKr3iITV_21M6actgdOz26ZMmdsHPu7IBmDpdDCv9bsUbTHRa2AuZf2x6LpDboWFPw-anM5AY8A5UEux0YvY-o0QsG9jWPfQo9mFO8OubSoycdzl26T5QJRBG5zURw1H-mhbKn4iEnFgYltf5gr34YiO_mGBtKSZTP7LFxSU4VucjR8-EjQEG6TTgA';

            // WebStage
            // const token = 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IndlYi1zdGFnZSJ9.eyJzdWIiOiI0MzJmOTdhNy1iYTM3LTQ3YmUtODllOC0wYzVkMGI5MGVlMWYiLCJpc3MiOiJnb2ZvcmNlLS1wYXJ0ZGF0YSIsImlhdCI6MTc0NzIyNDAyNSwiZXhwIjoxNzQ3MzEwNDI1fQ.HvFaH_Haq_LCryv2rT9XSfoit1ES5m8Q3h65Hw1ekwHBW0-guS-zcEE9zIC5VWH0UTFctb0gx4hQTcaYRSVDvt3B79jay2pXLBL8i7HdwsxShA8uwRmLw7RX0nbp4oVDUa0nuf7wTi51Q6wZeYvalkJDGZ8m-jbGAudRQIqzI5tUyE8cdoDxPpogNcLA-PgxiOA3EM8INuOCj0fBeSnlvVT9oDghiKbiYSjh0vw0XUW4yTt-cFC7V5l02yB-ApnJb3u0pZrU-8zy-ICoXEFtBAEyfCWp_wJif9_0WZkyTm4uctvr9gmZyonsl8SGqUerF46-GOXM5SBNKVsRIJhCUw';

            // DashStage
            // const token = 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImRhc2gtc3RhZ2UifQ.eyJzdWIiOiI0MzJmOTdhNy1iYTM3LTQ3YmUtODllOC0wYzVkMGI5MGVlMWYiLCJpc3MiOiJnb2ZvcmNlLS1wYXJ0ZGF0YSIsImlhdCI6MTc0NzIyNDAyNSwiZXhwIjoxNzQ3MzEwNDI1fQ.kaLQxdvZ9qGuNP6DxtQKNndJdIQiF1rhSfkrSqRdKW6IYxutWrUAVr74vZ3Aq8tv-l8K5cEyMCQT2Y5RptRVjRM2m_6nadk9o3gzQvWJoHbpGg5LfaQFgsCOHDysJhjpIG4F6fAJlZi50C3rgmkIAHr-WTXge1MCpp1XfYRhxRwfV9gFNMyuwt99KCeGLjuqlSHmdREFx5sVN0CK5Ma_9bqhpdNx4wUT6JMamx8rPCQrZxgs-iJEn_k-JnfUJduiAwFNyRmtAJTnxV0D_905h-yJWrcR4r_D6ZAAOktxMzVkAWYwS9ue5Ul6PqvDJbA4-aTDXW92yWOYt-D0A1qKLQ';
            embeddedservice_bootstrap.settings.language = 'en_US'; // For example, enter 'en' or 'en-US'

            window.addEventListener("onEmbeddedMessagingReady", () => {
                console.log("Received the onEmbeddedMessagingReady event.");

                // Send data to Salesforce
                embeddedservice_bootstrap.prechatAPI.setHiddenPrechatFields({
                    "EmailAddress": "test@test.com",
                    "UserID": "123",
                    "OriginURL": "https://test.com"
                });

                // Send your identity token to Salesforce
                embeddedservice_bootstrap.userVerificationAPI.setIdentityToken({
                    identityTokenType: "JWT",
                    identityToken: token,
                });
            });

            embeddedservice_bootstrap.init(
                '00Dbg000003aLDt',
                'DashboardChatDeployment',
                'https://goforce--partdata.sandbox.my.site.com/ESWDashboardChatDeploymen1747129625716',
                {
                    scrt2URL: 'https://goforce--partdata.sandbox.my.salesforce-scrt.com'
                }
            );
        } catch (err) {
            console.error('Error loading Embedded Messaging: ', err);
        }
    }
</script>
<script type='text/javascript' src='https://goforce--partdata.sandbox.my.site.com/ESWDashboardChatDeploymen1747129625716/assets/js/bootstrap.min.js' onload='initEmbeddedMessaging()'></script>
</body>
</html>